#pragma warning disable 1591
//------------------------------------------------------------------------------
// <auto-generated>
//     This code was generated by a tool.
//     Runtime Version:4.0.30319.42000
//
//     Changes to this file may cause incorrect behavior and will be lost if
//     the code is regenerated.
// </auto-generated>
//------------------------------------------------------------------------------

namespace ASP
{
    using System;
    using System.Collections.Generic;
    using System.IO;
    using System.Linq;
    using System.Net;
    using System.Text;
    using System.Web;
    using System.Web.Helpers;
    using System.Web.Mvc;
    using System.Web.Mvc.Ajax;
    using System.Web.Mvc.Html;
    using System.Web.Routing;
    using System.Web.Security;
    using System.Web.UI;
    using System.Web.WebPages;
    
    #line 1 "..\..\Views\Shared\ItemList.cshtml"
    using Frapid.ApplicationState.Cache;
    
    #line default
    #line hidden
    using Frapid.Configuration;
    using Frapid.Dashboard;
    using Frapid.DataAccess;
    using Frapid.DbPolicy;
    using Frapid.Framework;
    using Frapid.i18n;
    using Frapid.Messaging;
    using Frapid.NPoco;
    using Frapid.WebsiteBuilder;
    using MixERP.Purchases;
    
    [System.CodeDom.Compiler.GeneratedCodeAttribute("RazorGenerator", "2.0.0.0")]
    [System.Web.WebPages.PageVirtualPathAttribute("~/Views/Shared/ItemList.cshtml")]
    public partial class _Views_Shared_ItemList_cshtml : System.Web.Mvc.WebViewPage<dynamic>
    {
        public _Views_Shared_ItemList_cshtml()
        {
        }
        public override void Execute()
        {
            
            #line 4 "..\..\Views\Shared\ItemList.cshtml"
  
    ViewBag.Title = "Purchase";
    Layout = ViewBag.PurchaseLayoutPath;
    var meta = AppUsers.GetCurrent();

            
            #line default
            #line hidden
WriteLiteral("\r\n\r\n<link");

WriteLiteral(" rel=\"stylesheet\"");

WriteLiteral(" href=\"/Areas/MixERP.Purchases/Styles/purchase.css\"");

WriteLiteral("></link>\r\n\r\n<div");

WriteLiteral(" class=\"ui attached inverted pos purchase segment\"");

WriteLiteral(">\r\n    <div");

WriteLiteral(" class=\"ui active inverted dimmer\"");

WriteLiteral(" id=\"POSDimmer\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"ui large text loader\"");

WriteLiteral(">Doing something ...</div>\r\n    </div>\r\n    <div");

WriteLiteral(" class=\"ui grid\"");

WriteLiteral(">\r\n        <div");

WriteLiteral(" class=\"eleven wide column\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"status head\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"left\"");

WriteLiteral(">\r\n                    <strong");

WriteLiteral(" class=\"title info\"");

WriteLiteral(">\r\n                        Purchase\r\n                    </strong>\r\n             " +
"       <span");

WriteLiteral(" class=\"office info\"");

WriteLiteral(" title=\"Current Branch Office\"");

WriteLiteral(">\r\n");

WriteLiteral("                        ");

            
            #line 24 "..\..\Views\Shared\ItemList.cshtml"
                   Write(meta.OfficeName);

            
            #line default
            #line hidden
WriteLiteral("\r\n                    </span>\r\n                    <span");

WriteLiteral(" class=\"user info\"");

WriteLiteral(" title=\"You\"");

WriteLiteral(">\r\n");

WriteLiteral("                        ");

            
            #line 27 "..\..\Views\Shared\ItemList.cshtml"
                   Write(meta.Name);

            
            #line default
            #line hidden
WriteLiteral("\r\n                    </span>\r\n                    <span");

WriteLiteral(" class=\"area info\"");

WriteLiteral(" title=\"Current Area\"");

WriteLiteral(">\r\n");

WriteLiteral("                        ");

            
            #line 30 "..\..\Views\Shared\ItemList.cshtml"
                   Write(meta.OfficeCode);

            
            #line default
            #line hidden
WriteLiteral("\r\n                    </span>\r\n                    <span");

WriteLiteral(" class=\"office info\"");

WriteLiteral(" title=\"Office Name\"");

WriteLiteral(">\r\n");

WriteLiteral("                        ");

            
            #line 33 "..\..\Views\Shared\ItemList.cshtml"
                   Write(meta.OfficeName);

            
            #line default
            #line hidden
WriteLiteral("\r\n                    </span>\r\n                </div>\r\n\r\n                <div");

WriteLiteral(" class=\"right\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"inline blocks\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"item\"");

WriteLiteral(">\r\n                            <select");

WriteLiteral(" class=\"ui search inverted fluid dropdown\"");

WriteLiteral(" id=\"PriceTypeSelect\"");

WriteLiteral("></select>\r\n                        </div>\r\n                    </div>\r\n         " +
"       </div>\r\n\r\n            </div>\r\n\r\n\r\n\r\n            <div");

WriteLiteral(" class=\"category list\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"cat filter\"");

WriteLiteral(" style=\"display: none;\"");

WriteLiteral(">\r\n                    Clear\r\n                    <i");

WriteLiteral(" class=\"delete icon\"");

WriteLiteral("></i>\r\n                </div>\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"search panel\"");

WriteLiteral(">\r\n                <input");

WriteLiteral(" type=\"search\"");

WriteLiteral(" placeholder=\"Search ...\"");

WriteLiteral("/>\r\n\r\n            </div>\r\n            <div");

WriteLiteral(" class=\"item list\"");

WriteLiteral(" id=\"POSItemList\"");

WriteLiteral(">\r\n            </div>\r\n        </div>\r\n        <div");

WriteLiteral(" class=\"five wide column\"");

WriteLiteral(">\r\n            <div");

WriteLiteral(" class=\"tender info\"");

WriteLiteral(">\r\n                <div");

WriteLiteral(" class=\"page title\"");

WriteLiteral(">Purchase</div>\r\n                <div");

WriteLiteral(" id=\"SummaryItems\"");

WriteLiteral(" class=\"two summary items\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"amount item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Amount</div>\r\n                        <div");

WriteLiteral(" class=\"money\"");

WriteLiteral(">\r\n                            <span></span>\r\n                        </div>\r\n   " +
"                 </div>\r\n                    <div");

WriteLiteral(" class=\"store item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Store</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <select");

WriteLiteral(" id=\"StoreSelect\"");

WriteLiteral("></select>\r\n                        </div>\r\n                    </div>\r\n         " +
"       </div>\r\n                <div");

WriteLiteral(" class=\"one summary items\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"supplier item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Supplier</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <select");

WriteLiteral(" id=\"SupplierSelect\"");

WriteLiteral("></select>\r\n                        </div>\r\n                    </div>\r\n         " +
"       </div>\r\n                <div");

WriteLiteral(" class=\"two summary items\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"value date item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Value Date</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"date\"");

WriteLiteral(" id=\"ValueDateInputDate\"");

WriteLiteral(" />\r\n                        </div>\r\n                    </div>\r\n                " +
"    <div");

WriteLiteral(" class=\"book date item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Book Date</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" class=\"date\"");

WriteLiteral(" id=\"BookDateInputDate\"");

WriteLiteral(" />\r\n                        </div>\r\n                    </div>\r\n                " +
"</div>\r\n                <div");

WriteLiteral(" class=\"two summary items\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"cost center item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Cost Center</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <select");

WriteLiteral(" id=\"CostCenterSelect\"");

WriteLiteral("></select>\r\n                        </div>\r\n                    </div>\r\n         " +
"           <div");

WriteLiteral(" class=\"shipping company item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Shipper</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <select");

WriteLiteral(" id=\"ShipperSelect\"");

WriteLiteral("></select>\r\n                        </div>\r\n                    </div>\r\n         " +
"       </div>\r\n                <div");

WriteLiteral(" class=\"two summary items\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"reference number item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Ref#</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"ReferenceNumberInputText\"");

WriteLiteral(" />\r\n                        </div>\r\n                    </div>\r\n                " +
"    <div");

WriteLiteral(" class=\"memo item\"");

WriteLiteral(">\r\n                        <div");

WriteLiteral(" class=\"description\"");

WriteLiteral(">Memo</div>\r\n                        <div");

WriteLiteral(" class=\"control\"");

WriteLiteral(">\r\n                            <input");

WriteLiteral(" type=\"text\"");

WriteLiteral(" id=\"StatementReferenceInputText\"");

WriteLiteral(" />\r\n                        </div>\r\n                    </div>\r\n                " +
"</div>\r\n                <div");

WriteLiteral(" class=\"ui one column padded grid\"");

WriteLiteral(">\r\n                    <div");

WriteLiteral(" class=\"column\"");

WriteLiteral(">\r\n                        <button");

WriteLiteral(" id=\"CheckoutButton\"");

WriteLiteral(" class=\"ui green icon big button\"");

WriteLiteral(">\r\n                            <i");

WriteLiteral(" class=\"cart icon\"");

WriteLiteral("></i>\r\n                            CHECKOUT\r\n                        </button>\r\n " +
"                       <button");

WriteLiteral(" id=\"ClearScreenButton\"");

WriteLiteral(" class=\"ui red icon big button\"");

WriteLiteral(">\r\n                            <i");

WriteLiteral(" class=\"delete icon\"");

WriteLiteral("></i>\r\n                            CLS\r\n                        </button>\r\n      " +
"              </div>\r\n                </div>\r\n            </div>\r\n            <d" +
"iv");

WriteLiteral(" id=\"PurchaseItems\"");

WriteLiteral(" class=\"purchase items\"");

WriteLiteral(">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<script>\r\n    $(\"#Pu" +
"rchaseItems .item\")\r\n        .on(\"contextmenu\",\r\n            function (e) {\r\n   " +
"             e.preventDefault();\r\n                const el = $(this);\r\n         " +
"       const defaultMenu = el.find(\".info.block, .number.block\");\r\n             " +
"   const contextMenu = el.find(\".context.menu\");\r\n\r\n                defaultMenu." +
"toggle();\r\n                contextMenu.toggle();\r\n            });\r\n</script>\r\n\r\n" +
"<script>\r\n    var itemTemplate = `<div class=\"item\" id=\"pos-{ItemId}\" data-cost-" +
"price=\"{CostPrice}\" data-photo=\"{Photo}\" data-unit-id=\"{UnitId}\" data-valid-unit" +
"s=\"{ValidUnits}\" data-brand=\"{BrandName}\" data-item-group=\"{ItemGroupName}\" data" +
"-item-name=\"{ItemName}\" data-item-code=\"{ItemCode}\" data-item-id=\"{ItemId}\" data" +
"-price=\"{Price}\">\r\n\t<div class=\"photo block\">\r\n\t\t<img src=\"{Photo}\">\r\n\t</div>\r\n\t" +
"<div class=\"info block\">\r\n\t\t<div class=\"header\">{ItemName}</div>\r\n\t\t<div class=\"" +
"price info\">\r\n\t\t\t<span class=\"rate\">{CostPrice}</span>\r\n\t\t\t<span>&nbsp; x&nbsp; " +
"</span>\r\n\t\t\t<span class=\"quantity\">1</span>\r\n\t\t\t<span>&nbsp; =&nbsp; </span>\r\n\t\t" +
"\t<span class=\"amount\"></span>\r\n\t\t</div>\r\n\t\t<div class=\"discount info\" style=\"dis" +
"play:none;\">\r\n\t\t\t<span>Less&nbsp; </span>\r\n\t\t\t<span class=\"discount rate\"></span" +
">\r\n\t\t\t<span>&nbsp; =&nbsp; </span>\r\n\t\t\t<span class=\"discounted amount\"></span>\r\n" +
"\t\t</div>\r\n\t\t<div>\r\n\t\t\t<select class=\"unit inverted\" data-item-id=\"{ItemId}\">\r\n\t\t" +
"\t</select>\r\n\t\t</div>\r\n\t</div>\r\n\t<div class=\"number block\">\r\n\t\t<input type=\"text\"" +
" class=\"price\" title=\"Edit Price\" value=\"{CostPrice}\">\r\n\t\t<input type=\"text\" cla" +
"ss=\"quantity\" title=\"Enter Quantity\" value=\"1\">\r\n\t\t<input type=\"text\" class=\"dis" +
"count\" title=\"Enter Discount\" value=\"\">\r\n\t\t<button class=\"ui red fluid button\" o" +
"nclick=\"removeItem(this);\" style=\"display:none;\">Delete</button>\r\n\t</div>\r\n</div" +
">`\r\n</script>\r\n\r\n<script>\r\n    var products = [];\r\n    var metaUnits = [];\r\n\r\n  " +
"  function fetchUnits() {\r\n        function request() {\r\n            const url =" +
" \"/api/forms/inventory/units/all\";\r\n            return window.getAjaxRequest(url" +
");\r\n        };\r\n\r\n        const ajax = request();\r\n\r\n        ajax.success(functi" +
"on (response) {\r\n            window.metaUnits = response;\r\n        });\r\n    };\r\n" +
"\r\n    function fetchProducts() {\r\n        function request() {\r\n            cons" +
"t url = \"/dashboard/purchase/tasks/items\";\r\n            return window.getAjaxReq" +
"uest(url);\r\n        };\r\n\r\n        const ajax = request();\r\n\r\n        ajax.succes" +
"s(function (response) {\r\n            window.products = response;\r\n            $(" +
"document).trigger(\"itemFetched\");\r\n        });\r\n    };\r\n\r\n    $(\".search.panel i" +
"nput\").keyup(function () {\r\n        const el = $(this);\r\n        const term = el" +
".val();\r\n\r\n        const categoryEl = $(\".category.list .selected.category\");\r\n " +
"       var category = \"\";\r\n\r\n        if (categoryEl.length) {\r\n            categ" +
"ory = categoryEl.text();\r\n        };\r\n\r\n        displayProducts(category, term);" +
"\r\n\r\n        initializeClickAndAction();\r\n    });\r\n\r\n    $(\".search.panel input\")" +
".keydown(function (e) {\r\n        if (e.keyCode === 13) {\r\n            const item" +
" = $(\".item.list .item:first\");\r\n\r\n            if (item.length) {\r\n             " +
"   item.trigger(\"click\");\r\n            };\r\n        };\r\n    });\r\n\r\n    window.fet" +
"chUnits();\r\n    window.fetchProducts();\r\n\r\n    setTimeout(function () {\r\n       " +
" window.fetchProducts();\r\n    }, 120000);\r\n\r\n    function removeItem(el) {\r\n    " +
"    const confirmed = confirm(\"Are you sure?\");\r\n\r\n        if (!confirmed) {\r\n  " +
"          return;\r\n        };\r\n\r\n        el = $(el);\r\n        const container = " +
"el.parent().parent();\r\n        container.remove();\r\n        window.updateTotal()" +
";\r\n    };\r\n\r\n    $(document).on(\"itemFetched\", function () {\r\n        $(\"#POSDim" +
"mer\").removeClass(\"active\");\r\n        displayProducts();\r\n        displayCategor" +
"ies();\r\n        initializeClickAndAction();\r\n    });\r\n\r\n\r\n    function initializ" +
"eClickAndAction() {\r\n        $(\"#POSItemList .item\").unbind(\"click\").bind(\"click" +
"\", function () {\r\n            var el = $(this);\r\n            var costPrice = el." +
"attr(\"data-cost-price\");\r\n            var photo = el.attr(\"data-photo\");\r\n\r\n    " +
"        var barCode = el.attr(\"data-barcode\");\r\n            var brand = el.attr(" +
"\"data-brand\");\r\n            var unitId = el.attr(\"data-unit-id\");\r\n            v" +
"ar validUnits = el.attr(\"data-valid-units\");\r\n            var itemGroup = el.att" +
"r(\"data-item-group\");\r\n            var itemName = el.attr(\"data-item-name\");\r\n  " +
"          var itemCode = el.attr(\"data-item-code\");\r\n            var itemId = el" +
".attr(\"data-item-id\");\r\n            var price = parseFloat(costPrice || 0);\r\n\r\n " +
"           if (!price) {\r\n                alert(\"Cannot add item because the pri" +
"ce is zero.\");\r\n                return;\r\n            };\r\n\r\n\r\n\r\n            var t" +
"argetEl = $(\"#PurchaseItems\");\r\n            var selector = \"pos-\" + itemId;\r\n   " +
"         var existingEl = $(\"#\" + selector);\r\n\r\n            if (existingEl.lengt" +
"h) {\r\n                var existingQuantitySpan = existingEl.find(\"span.quantity\"" +
");\r\n                var existingQuantityInput = existingEl.find(\"input.quantity\"" +
");\r\n\r\n                var quantity = parseInt(existingQuantitySpan.text() || 0);" +
"\r\n                quantity++;\r\n\r\n                existingQuantitySpan.text(quant" +
"ity);\r\n                existingQuantityInput.val(quantity).trigger(\"keyup\");\r\n\r\n" +
"                window.updateTotal();\r\n                return;\r\n            };\r\n" +
"\r\n            var template = itemTemplate;\r\n\r\n            template = template.re" +
"place(/{ItemId}/g, itemId);\r\n            template = template.replace(/{CostPrice" +
"}/g, costPrice);\r\n            template = template.replace(/{Photo}/g, photo);\r\n " +
"           template = template.replace(/{BarCode}/g, barCode);\r\n            temp" +
"late = template.replace(/{BrandName}/g, brand);\r\n            template = template" +
".replace(/{ItemGroupName}/g, itemGroup);\r\n            template = template.replac" +
"e(/{ItemName}/g, itemName);\r\n            template = template.replace(/{ItemCode}" +
"/g, itemCode);\r\n            template = template.replace(/{Price}/g, price);\r\n   " +
"         template = template.replace(/{UnitId}/g, unitId);\r\n            template" +
" = template.replace(/{ValidUnits}/g, validUnits);\r\n\r\n            var item = $(te" +
"mplate);\r\n            var quantityInput = item.find(\"input.quantity\");\r\n        " +
"    var priceInput = item.find(\"input.price\");\r\n            var discountInput = " +
"item.find(\"input.discount\");\r\n            var unitSelect = item.find(\"select.uni" +
"t\");\r\n\r\n            function loadUnits(el, defaultUnitId, validUnits) {\r\n       " +
"         el.html(\"\");\r\n\r\n                const units = window.Enumerable.From(wi" +
"ndow.metaUnits)\r\n                    .Where(function (x) {\r\n                    " +
"    return validUnits.indexOf(x.unit_id.toString()) > -1;\r\n                    }" +
").ToArray();\r\n\r\n                $.each(units, function () {\r\n                   " +
" const unit = this;\r\n\r\n                    const option = $(\"<option/ >\");\r\n    " +
"                option.attr(\"value\", unit.unit_id);\r\n                    option." +
"html(unit.unit_name);\r\n\r\n                    if (defaultUnitId === unit.unit_id)" +
" {\r\n                        option.attr(\"selected\", \"\");\r\n                    };" +
"\r\n\r\n                    option.appendTo(el);\r\n                });\r\n\r\n           " +
" };\r\n\r\n            loadUnits(unitSelect, unitId, validUnits.split(\',\'));\r\n\r\n    " +
"        function updateItemTotal(el) {\r\n                const quantityEl = el.fi" +
"nd(\"input.quantity\");\r\n                const discountEl = el.find(\"input.discoun" +
"t\");\r\n\r\n                const quantity = parseInt(quantityEl.val() || 0);\r\n     " +
"           const discountRate = parseFloat(discountEl.val().replace(\"%\", \"\"));\r\n" +
"                const price = parseFloat(el.find(\"input.price\").val());\r\n       " +
"         //var price = parseFloat(el.attr(\"data-price\") || 0);\r\n\r\n              " +
"  const amount = (price * quantity).toFixed(2);\r\n                const discounte" +
"dAmount = ((price * quantity) * ((100 - discountRate) / 100)).toFixed(2);\r\n\r\n   " +
"             el.find(\"span.rate:not(.discount)\").html(price);\r\n                e" +
"l.find(\"span.quantity\").html(quantity);\r\n                el.find(\"span.amount\")." +
"html(amount);\r\n                el.find(\"span.discount.rate\").html(\"\");\r\n        " +
"        el.find(\"span.discounted.amount\").html(\"\");\r\n\r\n                if (disco" +
"untRate) {\r\n                    el.find(\".discount.info\").show();\r\n             " +
"       el.find(\"span.discount.rate\").html(discountEl.val().replace(\"%\", \"\") + \"%" +
"\");\r\n                    el.find(\"span.discounted.amount\").html(discountedAmount" +
");\r\n                } else {\r\n                    el.find(\".discount.info\").hide" +
"();\r\n                }\r\n\r\n                window.updateTotal();\r\n\r\n            }" +
";\r\n\r\n            quantityInput.on(\"keyup\", function () {\r\n                const " +
"el = $(this);\r\n                const parentInfo = el.parent().parent();\r\n       " +
"         updateItemTotal(parentInfo);\r\n            });\r\n\r\n            discountIn" +
"put.on(\"keyup\", function () {\r\n                const el = $(this);\r\n\r\n          " +
"      const rate = parseFloat(el.val());\r\n                if (rate > 100) {\r\n   " +
"                 el.val(\"100\");\r\n                    return;\r\n                };" +
"\r\n\r\n                const parentInfo = el.parent().parent();\r\n                up" +
"dateItemTotal(parentInfo);\r\n            });\r\n\r\n            priceInput.on(\"keyup\"" +
", function () {\r\n                const el = $(this);\r\n                const pare" +
"ntInfo = el.parent().parent();\r\n                updateItemTotal(parentInfo);\r\n  " +
"          });\r\n\r\n            discountInput.on(\"blur\", function () {\r\n           " +
"     const el = $(this);\r\n                const value = el.val();\r\n\r\n           " +
"     if (!value) {\r\n                    return;\r\n                };\r\n\r\n         " +
"       if (value.substr(value.length - 1) === \"%\") {\r\n                    return" +
";\r\n                };\r\n\r\n                el.val(el.val() + \"%\");\r\n              " +
"  const parentInfo = el.parent().parent();\r\n                updateItemTotal(pare" +
"ntInfo);\r\n            });\r\n\r\n            function getPrice(el) {\r\n              " +
"  function request(itemId, supplierId, unitId) {\r\n                    var url = " +
"\"/dashboard/purchase/tasks/cost-price/{itemId}/{supplierId}/{unitId}\";\r\n        " +
"            url = url.replace(\"{itemId}\", itemId);\r\n                    url = ur" +
"l.replace(\"{supplierId}\", supplierId);\r\n                    url = url.replace(\"{" +
"unitId}\", unitId);\r\n\r\n                    return window.getAjaxRequest(url);\r\n  " +
"              };\r\n\r\n                const itemId = el.attr(\"data-item-id\");\r\n   " +
"             const supplierId = parseInt($(\"#SupplierSelect\").val() || 0);\r\n    " +
"            const unitId = el.val();\r\n\r\n                $(\".pos.purchase.segment" +
"\").addClass(\"loading\");\r\n                const ajax = request(itemId, supplierId" +
", unitId);\r\n\r\n                ajax.success(function (response) {\r\n              " +
"      $(\".pos.purchase.segment\").removeClass(\"loading\");\r\n                    co" +
"nst priceInput = el.parent().parent().parent().find(\"input.price\");\r\n           " +
"         priceInput.val(response).trigger(\"keyup\");\r\n                });\r\n\r\n    " +
"            ajax.fail(function (xr) {\r\n                    $(\".pos.purchase.segm" +
"ent\").removeClass(\"loading\");\r\n                    console.log(window.getAjaxErr" +
"orMessage(xhr));\r\n                });\r\n            };\r\n\r\n            unitSelect." +
"on(\"change\", function () {\r\n                getPrice($(this));\r\n            });\r" +
"\n\r\n            item.on(\"contextmenu\", function (e) {\r\n                e.preventD" +
"efault();\r\n                const el = $(this);\r\n                const inputEl = " +
"el.find(\".number.block input\");\r\n                const buttonEl = el.find(\".numb" +
"er.block button\");\r\n\r\n                inputEl.toggle();\r\n                buttonE" +
"l.toggle();\r\n            });\r\n\r\n            item.appendTo(targetEl);\r\n          " +
"  quantityInput.trigger(\"keyup\");\r\n            window.updateTotal();\r\n        })" +
";\r\n    };\r\n\r\n    $(\"#SummaryItems div.discount .money input, \" +\r\n        \"#Rece" +
"iptSummary div.tender .money input\").keyup(function () {\r\n            window.upd" +
"ateTotal();\r\n        });\r\n\r\n    function updateTotal() {\r\n        const candidat" +
"es = $(\"#PurchaseItems div.item\");\r\n        const amountEl = $(\"#SummaryItems di" +
"v.amount .money\");\r\n\r\n        var totalPrice = 0;\r\n        //var totalQuantity =" +
" 0;\r\n\r\n        $.each(candidates, function () {\r\n            const el = $(this);" +
"\r\n            const quantityEl = el.find(\"input.quantity\");\r\n            const d" +
"iscountEl = el.find(\"input.discount\");\r\n\r\n            const quantity = parseInt(" +
"quantityEl.val() || 0);\r\n            const discountRate = parseFloat(discountEl." +
"val().replace(\"%\", \"\"));\r\n            const price = parseFloat(el.find(\"input.pr" +
"ice\").val());\r\n            //var price = parseFloat(el.attr(\"data-price\") || 0);" +
"\r\n\r\n            const amount = price * quantity;\r\n            const discountedAm" +
"ount = amount * ((100 - discountRate) / 100);\r\n\r\n            totalPrice += (disc" +
"ountedAmount || amount);\r\n            //totalQuantity += quantity;\r\n        });\r" +
"\n\r\n        totalPrice = parseFloat(totalPrice.toFixed(2));\r\n\r\n        amountEl.h" +
"tml(totalPrice);\r\n    };\r\n\r\n    function displayCategories() {\r\n        const ca" +
"tegories = window.Enumerable.From(products).Distinct(function (x) { return x.Ite" +
"mGroupName }).Select(function (x) { return x.ItemGroupName }).ToArray();\r\n      " +
"  var targetEl = $(\".cat.filter\");\r\n        $(\".category.list\").find(\".category\"" +
").remove();\r\n\r\n        targetEl.unbind(\"click\").bind(\"click\", function () {\r\n   " +
"         displayProducts();\r\n            $(\".category\").removeClass(\"selected\");" +
"\r\n            targetEl.hide();\r\n            initializeClickAndAction();\r\n       " +
" });\r\n\r\n        $.each(categories, function () {\r\n            const category = $" +
"(\"<div class=\'category\' />\");\r\n            category.html(this);\r\n\r\n            c" +
"ategory.unbind(\"click\").bind(\"click\", function () {\r\n                $(\".search." +
"panel input\").val(\"\");\r\n                const el = $(this);\r\n                con" +
"st name = el.text();\r\n\r\n                if (name) {\r\n                    display" +
"Products(name);\r\n                    $(\".category\").removeClass(\"selected\");\r\n  " +
"                  el.addClass(\"selected\");\r\n\r\n                    targetEl.show(" +
");\r\n                } else {\r\n                    targetEl.hide();\r\n            " +
"    };\r\n\r\n                initializeClickAndAction();\r\n            });\r\n\r\n      " +
"      targetEl.before(category);\r\n        });\r\n    };\r\n\r\n    function displayPro" +
"ducts(category, searchQuery) {\r\n        var target = $(\"#POSItemList\");\r\n\r\n     " +
"   var groupItems;\r\n\r\n        if (!category && !searchQuery) {\r\n            grou" +
"pItems = products;\r\n        } else {\r\n            if (category && searchQuery) {" +
"\r\n                groupItems = window.Enumerable\r\n                    .From(prod" +
"ucts)\r\n                    .Where(function (x) {\r\n                        return" +
" x.ItemGroupName.toLowerCase() === category.toString().toLowerCase()\r\n          " +
"                  && x.ItemName.toLowerCase().indexOf(searchQuery.toLowerCase())" +
" > -1;\r\n                    }).ToArray();\r\n            } else if (!category && s" +
"earchQuery) {\r\n                groupItems = window.Enumerable\r\n                 " +
"   .From(products)\r\n                    .Where(function (x) {\r\n                 " +
"       return x.ItemName.toLowerCase().indexOf(searchQuery.toLowerCase()) > -1;\r" +
"\n                    }).ToArray();\r\n            } else {\r\n                groupI" +
"tems = window.Enumerable\r\n                    .From(products)\r\n                 " +
"   .Where(function (x) {\r\n                        return x.ItemGroupName.toLower" +
"Case() === category.toString().toLowerCase();\r\n                    }).ToArray();" +
"\r\n            };\r\n        };\r\n\r\n        groupItems = window.Enumerable.From(grou" +
"pItems).OrderBy(function(x) { return x.ItemId }).ToArray();\r\n\r\n        target.ht" +
"ml(\"\").hide();\r\n\r\n        $.each(groupItems, function () {\r\n            const pr" +
"oduct = this;\r\n\r\n            const item = $(\"<div class=\'item\' />\");\r\n          " +
"  item.attr(\"data-item-id\", product.ItemId);\r\n            item.attr(\"data-item-c" +
"ode\", product.ItemCode);\r\n            item.attr(\"data-item-name\", product.ItemNa" +
"me);\r\n            item.attr(\"data-item-group\", product.ItemGroupName);\r\n        " +
"    item.attr(\"data-brand\", product.BrandName);\r\n            item.attr(\"data-uni" +
"t-id\", product.UnitId);\r\n            item.attr(\"data-valid-units\", product.Valid" +
"Units);\r\n            item.attr(\"data-barcode\", product.Barcode);\r\n            it" +
"em.attr(\"data-photo\", product.Photo);\r\n            item.attr(\"data-cost-price\", " +
"product.CostPrice);\r\n\r\n            if (product.HotItem) {\r\n                item." +
"addClass(\"hot\");\r\n            };\r\n\r\n            const info = $(\"<div class=\'info" +
"\' />\");\r\n\r\n            const price = $(\"<div class=\'price\' />\");\r\n            pr" +
"ice.html(product.CostPrice);\r\n\r\n            price.appendTo(info);\r\n\r\n\r\n         " +
"   const photo = $(\"<div class=\'photo\' />\");\r\n            const img = $(\"<img />" +
"\");\r\n            img.attr(\"src\", product.Photo + \"?Height=200&Width=200\");\r\n\r\n  " +
"          img.appendTo(photo);\r\n            photo.appendTo(info);\r\n\r\n           " +
" const name = $(\"<div class=\'name\' />\");\r\n            name.html(product.ItemName" +
");\r\n\r\n            name.appendTo(info);\r\n\r\n            info.appendTo(item);\r\n    " +
"        item.appendTo(target);\r\n        });\r\n\r\n        if (searchQuery) {\r\n     " +
"       target.show();\r\n            return;\r\n        };\r\n\r\n        target.fadeIn(" +
"500);\r\n    };\r\n\r\n</script>\r\n\r\n<script>\r\n    $(\"#ClearScreenButton\")\r\n        .un" +
"bind(\"click\")\r\n        .bind(\"click\",\r\n            function () {\r\n              " +
"  clearScreen();\r\n            });\r\n\r\n    function clearScreen() {\r\n        $(\"#P" +
"urchaseItems\").html(\"\");\r\n        window.updateTotal();\r\n    };\r\n</script>\r\n\r\n<s" +
"cript>\r\n    function displayFieldBinder(el, url) {\r\n        function request() {" +
"\r\n            return window.getAjaxRequest(url);\r\n        };\r\n\r\n        const aj" +
"ax = request();\r\n\r\n        ajax.success(function (response) {\r\n            var o" +
"ptions = \"\";\r\n\r\n            $.each(response, function () {\r\n                var " +
"option = \"<option value=\'{key}\'>{value}</option>\";\r\n                option = opt" +
"ion.replace(\"{key}\", this.Key);\r\n                option = option.replace(\"{value" +
"}\", this.Value);\r\n\r\n                options += option;\r\n            });\r\n\r\n     " +
"       el.html(options);\r\n        });\r\n    };\r\n\r\n    function loadStores() {\r\n  " +
"      displayFieldBinder($(\"#StoreSelect\"), \"/api/forms/inventory/stores/display" +
"-fields\");\r\n    };\r\n\r\n    function loadShippers() {\r\n        displayFieldBinder(" +
"$(\"#ShipperSelect\"), \"/api/forms/inventory/shippers/display-fields\");\r\n    };\r\n\r" +
"\n    function loadCostCenters() {\r\n        displayFieldBinder($(\"#CostCenterSele" +
"ct\"), \"/api/forms/finance/cost-centers/display-fields\");\r\n    };\r\n\r\n    function" +
" loadPriceTypes() {\r\n        displayFieldBinder($(\"#PriceTypeSelect\"), \"/api/for" +
"ms/purchase/price-types/display-fields\");\r\n    };\r\n\r\n    function loadSuppliers(" +
") {\r\n        displayFieldBinder($(\"#SupplierSelect\"), \"/api/forms/inventory/supp" +
"liers/display-fields\");\r\n    };\r\n\r\n    loadStores();\r\n    loadPriceTypes();\r\n   " +
" loadSuppliers();\r\n    loadCostCenters();\r\n    loadShippers();\r\n</script>\r\n\r\n<sc" +
"ript>\r\n    setTimeout(function () {\r\n        $(\".decimal\").number(true, window.c" +
"urrencyDecimalPlaces, \".\", \"\");\r\n    }, 100);\r\n\r\n\r\n    window.overridePath = \"/d" +
"ashboard/purchase/tasks/entry\";\r\n</script>");

        }
    }
}
#pragma warning restore 1591
